<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비디오 편집기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>나만의 비디오 편집기</h1>

        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'upload-tab')">비디오 업로드</button>
            <button class="tab-button" onclick="openTab(event, 'edit-tab')">비디오 편집</button>
            <button class="tab-button" onclick="openTab(event, 'bgm-tab')">BGM 관리</button>
        </div>

        <div id="upload-tab" class="tab-content active">
            <h2>새 비디오 업로드</h2>
            <input type="file" id="videoFileInput" accept="video/*">
            <button onclick="uploadVideo()">업로드</button>
            <div id="uploadMessage" class="message"></div>
        </div>

        <div id="edit-tab" class="tab-content">
            <h2>비디오 편집</h2>
            <div class="video-preview-section">
                <video id="videoPlayer" controls></video>
                <div class="video-info">
                    <p>현재 재생 시간: <span id="currentTime">00:00:00</span> / 총 길이: <span id="totalDuration">00:00:00</span></p>
                </div>
            </div>

            <div class="video-select-section">
                <h3>편집할 비디오 선택</h3>
                <select id="userVideosSelect" onchange="loadSelectedVideo()">
                    <option value="">비디오를 선택해주세요</option>
                </select>
                <div id="videoSelectMessage" class="message"></div>
            </div>

            <div class="edit-options">
                <h3>트리밍 (자르기)</h3>
                <label for="trimStart">시작 시간 (초):</label>
                <input type="number" id="trimStart" step="0.1" value="0">
                <label for="trimEnd">종료 시간 (초):</label>
                <input type="number" id="trimEnd" step="0.1">
                <button onclick="trimVideo()">트리밍 적용</button>
                <div id="trimMessage" class="message"></div>

                <h3>BGM 추가</h3>
                <select id="bgmSelect">
                    <option value="">BGM을 선택해주세요</option>
                </select>
                <div class="volume-controls">
                    <label for="bgmVolume">BGM 볼륨:</label>
                    <input type="range" id="bgmVolume" min="0" max="1" step="0.1" value="0.5">
                    <span id="bgmVolumeValue">0.5</span>

                    <label for="videoVolume">원본 비디오 볼륨:</label>
                    <input type="range" id="videoVolume" min="0" max="1" step="0.1" value="0.5">
                    <span id="videoVolumeValue">0.5</span>
                </div>
                <button onclick="addBGMToVideo()">BGM 적용</button>
                <div id="bgmMessage" class="message"></div>

                <h3>자막 추가</h3>
                <div id="subtitle-input-container">
                    <div class="subtitle-entry">
                        <input type="text" placeholder="자막 내용" class="subtitle-text">
                        <input type="number" placeholder="시작(초)" step="0.1" class="subtitle-start">
                        <input type="number" placeholder="종료(초)" step="0.1" class="subtitle-end">
                        <button onclick="removeSubtitleInput(this)">삭제</button>
                    </div>
                </div>
                <button onclick="addSubtitleInput()">+ 자막 추가</button>

                <div class="subtitle-font-options">
                    <label for="fontSelect">폰트:</label>
                    <select id="fontSelect"></select>
                    <label for="fontSize">크기:</label>
                    <input type="number" id="fontSize" value="30" min="10" max="100">
                    <label for="fontColor">색상:</label>
                    <input type="color" id="fontColor" value="#FFFFFF">
                    <label for="subPosX">X 위치:</label>
                    <input type="text" id="subPosX" value="(w-text_w)/2">
                    <label for="subPosY">Y 위치:</label>
                    <input type="text" id="subPosY" value="h-th-20">
                    <label for="subBoxColor">배경색:</label>
                    <input type="color" id="subBoxColor" value="#000000">
                    <label for="subBoxOpacity">배경투명도:</label>
                    <input type="range" id="subBoxOpacity" min="0" max="1" step="0.1" value="0.5">
                </div>
                <button onclick="addSubtitlesToVideo()">자막 적용</button>
                <div id="subtitleMessage" class="message"></div>
            </div>
            
            <div id="finalVideoLink" class="final-link">
                <a href="#" target="_blank" style="display: none;">최종 비디오 다운로드</a>
            </div>
        </div>

        <div id="bgm-tab" class="tab-content">
            <h2>BGM 관리</h2>
            <div class="bgm-download-section">
                <h3>YouTube BGM 다운로드</h3>
                <input type="text" id="youtubeUrlInput" placeholder="YouTube URL 입력">
                <button onclick="downloadBGMFromYouTube()">다운로드</button>
                <div id="bgmDownloadMessage" class="message"></div>
            </div>
            
            <div class="bgm-list-section">
                <h3>다운로드된 BGM 목록</h3>
                <ul id="downloadedBGMList">
                    </ul>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>